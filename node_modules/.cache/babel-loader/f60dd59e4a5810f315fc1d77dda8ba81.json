{"ast":null,"code":"var _jsxFileName = \"/home/rajatrajivsharma/Desktop/ShoppeR/Shoppe/src/Components/LoginPage.js\";\nimport React, { Component } from 'react';\nimport LoginPages from '../Views/LoginView';\nimport { ProductConsumer } from '../Data/Context';\nimport axios from 'axios';\nexport default class LoginPage extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onInputChange = payload => {\n      this.setState({ ...this.state,\n        ...payload\n      });\n    };\n\n    this.onSubmitHandler = e => {\n      e.preventDefault();\n      const validUser = this.state.users.filter(user => user.username === this.state.username && user.password === this.state.password);\n\n      if (validUser.length !== 0) {\n        this.setState({\n          isValid: true,\n          name: validUser[0].fullName\n        }, this.redirectTicketList);\n\n        const _token = Math.floor(Math.random() * 100);\n\n        window.localStorage.setItem('_token', _token);\n      } else {\n        this.setState({\n          isValid: false\n        });\n      }\n    };\n\n    this.redirect = () => {\n      const _token = window.localStorage.getItem('_token');\n\n      if (_token !== null) {\n        this.props.history.push('/home');\n      } else {\n        this.props.history.push('/');\n      }\n    };\n\n    this.redirectTicketList = () => {\n      // const token = window.localStorage.getItem('_token');\n      // if (token != null) {\n      //     this.props.history.push('/ticketlist');\n      // }\n      if (this.state.isValid === true) {\n        this.props.history.push('/home');\n      }\n    };\n\n    this.state = {\n      username: null,\n      password: null,\n      name: null,\n      users: null,\n      isValid: true\n    };\n  }\n\n  componentDidMount() {\n    axios.get(\"https://xebiascart.herokuapp.com/users\").then(response => {\n      this.setState({\n        users: response.data\n      });\n    });\n    this.redirect();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(ProductConsumer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }\n    }, value => {\n      return /*#__PURE__*/React.createElement(LoginPages, Object.assign({ ...this.state,\n        onInputChange: this.onInputChange,\n        onSubmitHandler: this.onSubmitHandler\n      }, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 29\n        }\n      }));\n    });\n  }\n\n}","map":{"version":3,"sources":["/home/rajatrajivsharma/Desktop/ShoppeR/Shoppe/src/Components/LoginPage.js"],"names":["React","Component","LoginPages","ProductConsumer","axios","LoginPage","constructor","props","onInputChange","payload","setState","state","onSubmitHandler","e","preventDefault","validUser","users","filter","user","username","password","length","isValid","name","fullName","redirectTicketList","_token","Math","floor","random","window","localStorage","setItem","redirect","getItem","history","push","componentDidMount","get","then","response","data","render","value"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,UAAP,MAAuB,oBAAvB;AACA,SAASC,eAAT,QAAgC,iBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,eAAe,MAAMC,SAAN,SAAwBJ,SAAxB,CAAkC;AAC7CK,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAoBnBC,aApBmB,GAoBFC,OAAD,IAAa;AACzB,WAAKC,QAAL,CAAc,EAAE,GAAG,KAAKC,KAAV;AAAiB,WAAGF;AAApB,OAAd;AACH,KAtBkB;;AAAA,SAuBnBG,eAvBmB,GAuBAC,CAAD,IAAO;AACrBA,MAAAA,CAAC,CAACC,cAAF;AACA,YAAMC,SAAS,GAAG,KAAKJ,KAAL,CAAWK,KAAX,CAAiBC,MAAjB,CAAwBC,IAAI,IAAIA,IAAI,CAACC,QAAL,KAAkB,KAAKR,KAAL,CAAWQ,QAA7B,IAAyCD,IAAI,CAACE,QAAL,KAAkB,KAAKT,KAAL,CAAWS,QAAtG,CAAlB;;AAEA,UAAIL,SAAS,CAACM,MAAV,KAAqB,CAAzB,EAA4B;AACxB,aAAKX,QAAL,CAAc;AAAEY,UAAAA,OAAO,EAAE,IAAX;AAAiBC,UAAAA,IAAI,EAAER,SAAS,CAAC,CAAD,CAAT,CAAaS;AAApC,SAAd,EAA8D,KAAKC,kBAAnE;;AACA,cAAMC,MAAM,GAAGC,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgB,GAA3B,CAAf;;AACAC,QAAAA,MAAM,CAACC,YAAP,CAAoBC,OAApB,CAA4B,QAA5B,EAAsCN,MAAtC;AACH,OAJD,MAIO;AACH,aAAKhB,QAAL,CAAc;AAAEY,UAAAA,OAAO,EAAE;AAAX,SAAd;AACH;AACJ,KAlCkB;;AAAA,SAoCnBW,QApCmB,GAoCR,MAAM;AACb,YAAMP,MAAM,GAAGI,MAAM,CAACC,YAAP,CAAoBG,OAApB,CAA4B,QAA5B,CAAf;;AACA,UAAIR,MAAM,KAAK,IAAf,EAAqB;AACjB,aAAKnB,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH,OAFD,MAEO;AACH,aAAK7B,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB;AACH;AACJ,KA3CkB;;AAAA,SA6CnBX,kBA7CmB,GA6CE,MAAM;AACvB;AACA;AACA;AACA;AAEA,UAAI,KAAKd,KAAL,CAAWW,OAAX,KAAuB,IAA3B,EAAiC;AAC7B,aAAKf,KAAL,CAAW4B,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB;AACH;AACJ,KAtDkB;;AAEf,SAAKzB,KAAL,GAAa;AACTQ,MAAAA,QAAQ,EAAE,IADD;AAETC,MAAAA,QAAQ,EAAE,IAFD;AAGTG,MAAAA,IAAI,EAAE,IAHG;AAITP,MAAAA,KAAK,EAAE,IAJE;AAKTM,MAAAA,OAAO,EAAE;AALA,KAAb;AAOH;;AAEDe,EAAAA,iBAAiB,GAAG;AAChBjC,IAAAA,KAAK,CAACkC,GAAN,CAAU,wCAAV,EACKC,IADL,CACWC,QAAD,IAAc;AAChB,WAAK9B,QAAL,CAAc;AAAEM,QAAAA,KAAK,EAAEwB,QAAQ,CAACC;AAAlB,OAAd;AACH,KAHL;AAIA,SAAKR,QAAL;AAEH;;AAsCDS,EAAAA,MAAM,GAAG;AACL,wBACI,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEQC,KAAK,IAAI;AAEL,0BACI,oBAAC,UAAD,gBAAgB,EACZ,GAAG,KAAKhC,KADI;AAEZH,QAAAA,aAAa,EAAE,KAAKA,aAFR;AAGZI,QAAAA,eAAe,EAAE,KAAKA;AAHV,OAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SADJ;AAQH,KAZT,CADJ;AAkBH;;AA5E4C","sourcesContent":["import React, { Component } from 'react';\nimport LoginPages from '../Views/LoginView';\nimport { ProductConsumer } from '../Data/Context';\nimport axios from 'axios';\n\nexport default class LoginPage extends Component {\n    constructor(props) {\n        super(props)\n        this.state = {\n            username: null,\n            password: null,\n            name: null,\n            users: null,\n            isValid: true\n        }\n    }\n\n    componentDidMount() {\n        axios.get(\"https://xebiascart.herokuapp.com/users\")\n            .then((response) => {\n                this.setState({ users: response.data })\n            })\n        this.redirect()\n\n    }\n\n    onInputChange = (payload) => {\n        this.setState({ ...this.state, ...payload });\n    }\n    onSubmitHandler = (e) => {\n        e.preventDefault();\n        const validUser = this.state.users.filter(user => user.username === this.state.username && user.password === this.state.password);\n\n        if (validUser.length !== 0) {\n            this.setState({ isValid: true, name: validUser[0].fullName }, this.redirectTicketList)\n            const _token = Math.floor(Math.random() * 100)\n            window.localStorage.setItem('_token', _token)\n        } else {\n            this.setState({ isValid: false })\n        }\n    }\n\n    redirect = () => {\n        const _token = window.localStorage.getItem('_token');\n        if (_token !== null) {\n            this.props.history.push('/home');\n        } else {\n            this.props.history.push('/')\n        }\n    }\n\n    redirectTicketList = () => {\n        // const token = window.localStorage.getItem('_token');\n        // if (token != null) {\n        //     this.props.history.push('/ticketlist');\n        // }\n\n        if (this.state.isValid === true) {\n            this.props.history.push('/home')\n        }\n    }\n\n    render() {\n        return (\n            <ProductConsumer>\n                {\n                    value => {\n\n                        return (\n                            <LoginPages {...{\n                                ...this.state,\n                                onInputChange: this.onInputChange,\n                                onSubmitHandler: this.onSubmitHandler\n                            }} />\n\n                        )\n                    }\n                }\n\n            </ProductConsumer>\n        );\n    }\n\n}"]},"metadata":{},"sourceType":"module"}